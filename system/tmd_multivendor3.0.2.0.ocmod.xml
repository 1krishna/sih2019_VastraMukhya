<?xml version="1.0" encoding="utf-8"?>
<modification>
	<name>TMD Vendor System Journal3</name>
	<version>3.x</version>
	<code>#tmdcsp</code>
	<author>TMD(opencartextensions.in)</author>
	<link>http://opencartextensions.in/</link>
    <file path="admin/view/template/design/layout_form.twig">
		<operation error="skip">
			<search><![CDATA[<table id="module-content-bottom" class="table table-striped table-bordered table-hover">]]></search>
			<add position="before"><![CDATA[
			<table id="module-column-inpro" class="table table-striped table-bordered table-hover">
                  <thead>
                    <tr>
                      <td class="text-center">{{ text_column_inpro }}</td>
                    </tr>
                  </thead>
                  <tbody>
                    {% for layout_module in layout_modules %}
                    {% if layout_module.position == 'column_inpro' %}
                    <tr id="module-row{{ module_row }}">
                      <td class="text-left"><div class="input-group">
                          <select name="layout_module[{{ module_row }}][code]" class="form-control input-sm">
                            {% for extension in extensions %}
                            <optgroup label="{{ extension.name }}">
                            {% if not extension.module %}
                            {% if extension.code == layout_module.code %}
                            <option value="{{ extension.code }}" selected="selected">{{ extension.name }}</option>
                            {% else %}
                            <option value="{{ extension.code }}">{{ extension.name }}</option>
                            {% endif %}
                            {% else %}
                            {% for module in extension.module %}
                            {% if module.code == layout_module.code %}
                            <option value="{{ module.code }}" selected="selected">{{ module.name }}</option>
                            {% else %}
                            <option value="{{ module.code }}">{{ module.name }}</option>
                            {% endif %}
                            {% endfor %}
                            {% endif %}
                            </optgroup>
                            {% endfor %}
                          </select>
                          <input type="hidden" name="layout_module[{{ module_row }}][position]" value="{{ layout_module.position }}" />
                          <input type="hidden" name="layout_module[{{ module_row }}][sort_order]" value="{{ layout_module.sort_order }}" />
                          <div class="input-group-btn"> <a href="{{ layout_module.edit }}" type="button" data-toggle="tooltip" title="{{ button_edit }}" target="_blank" class="btn btn-primary btn-sm"><i class="fa fa-pencil"></i></a>
                            <button type="button" onclick="$('#module-row{{ module_row }}').remove();" data-toggle="tooltip" title="{{ button_remove }}" class="btn btn-danger btn-sm"><i class="fa fa fa-minus-circle"></i></button>
                          </div>
                        </div></td>
                    </tr>
                    {% set module_row = module_row + 1 %}
                    {% endif %}
                    {% endfor %}
                  </tbody>
                  <tfoot>
                    <tr>
                      <td class="text-left"><div class="input-group">
                          <select class="form-control input-sm">
                            <option value=""></option>
                            {% for extension in extensions %}
                            <optgroup label="{{ extension.name }}">
                            {% if not extension.module %}
                            <option value="{{ extension.code }}">{{ extension.name }}</option>
                            {% else %}
                            {% for module in extension.module %}
                            <option value="{{ module.code }}">{{ module.name }}</option>
                            {% endfor %}
                            {% endif %}
                            </optgroup>
                            {% endfor %}
                          </select>
                          <div class="input-group-btn">
                            <button type="button" onclick="addModule('column-inpro');" data-toggle="tooltip" title="{{ button_module_add }}" class="btn btn-primary btn-sm"><i class="fa fa-plus-circle"></i></button>
                          </div>
                        </div></td>
                    </tr>
                  </tfoot>
                </table>
				<!-- xml -->
				]]></add>
		</operation>
		<operation error="skip">
			<search><![CDATA[$('#module-column-left, #module-column-right, #module-content-top, #module-content-bottom').delegate('select[name*=\'code\']', 'change', function() {]]></search>
			<add position="replace"><![CDATA[$('#module-column-left, #module-column-right, #module-content-top, #module-content-bottom, #module-column-inpro').delegate('select[name*=\'code\']', 'change', function() {]]></add>
		</operation>
		<operation error="skip">
			<search><![CDATA[$('#module-column-left, #module-column-right, #module-content-top, #module-content-bottom').trigger('change');]]></search>
			<add position="replace"><![CDATA[$('#module-column-left, #module-column-inpro, #module-column-right, #module-content-top, #module-content-bottom').trigger('change');]]></add>
		</operation>		
	</file>
    
	<file path="admin/language/*/design/layout.php">
		<operation error="skip">
			<search><![CDATA[// Text]]></search>
			<add position="after"><![CDATA[
			/* xml */
			$_['text_column_inpro']         = 'In Product';
			/* xml */
			]]></add>
		</operation>		
	</file>
	
	<file path="catalog/language/*/common/header.php">
		<operation error="skip">
			<search><![CDATA[// Text]]></search>
			<add position="after"><![CDATA[
			/* xml */	
			$_['text_selleraccount'] = 'Seller';
			$_['text_loginseller']   = 'Login Seller';
            $_['text_allseller']     = 'Sellers List';
			$_['text_dashboard']     = 'Dashboard';
			$_['text_products']      = 'Products';
			$_['text_review']        = 'Review';
			$_['text_managestore']   = 'Manage Store';
			$_['text_manageprofile'] = 'Manage Profile';
			$_['text_manufacture']   = 'Manufacture';
			$_['text_profile']       = 'Seller Profile';
			$_['text_logout']       = 'Seller Logout';
			/* xml */]]></add>
		</operation>
	</file>
	
	<file path="catalog/controller/common/header.php">
		<operation error="skip">
			<search><![CDATA[// Wishlist]]></search>
			<add position="before"><![CDATA[
			/* xml start */
		$data['vendorlogged'] = $this->vendor->isLogged();
		
		$data['sellerlogin'] = $this->url->link('vendor/login', '', true);
        $data['allseller'] = $this->url->link('vendor/allseller', '', true);
		$data['dashboard'] = $this->url->link('vendor/dashboard', '', true);
		$data['products'] = $this->url->link('vendor/product', '', true);
		$data['review'] = $this->url->link('vendor/review', '', true);
		$data['managestore'] = $this->url->link('vendor/store', '', true);
		$data['manageprofile'] = $this->url->link('vendor/edit', '', true);
		$data['download'] = $this->url->link('vendor/download', '', true);
		$data['manufacture'] = $this->url->link('vendor/manufacturer', '', true);
		$data['vendor_profile'] = $this->url->link('vendor/vendor_profile', '&vendor_id=' . $this->vendor->getId(), true);
        $data['logouts'] = $this->url->link('vendor/logout', '', true);
		/* xml end */]]></add>
		</operation>
	</file>
	
	<file path="catalog/controller/startup/startup.php">
		<operation error="skip">
			<search><![CDATA[// Customer Group]]></search>
			<add position="before"><![CDATA[
			// vendor
		    $vendor = new Cart\Vendor($this->registry);
		    $this->registry->set('vendor', $vendor);]]></add>
		</operation>
	</file>
	
	<file path="catalog/controller/product/product.php">
		<operation error="skip">
			<search><![CDATA[$data['column_left'] = $this->load->controller('common/column_left');]]></search>
			<add position="before"><![CDATA[
			// vendor
		$data['column_inpro'] = $this->load->controller('common/column_inpro');]]></add>
		</operation>
	</file>
	
	<file path="catalog/view/theme/*/template/product/product.twig">
		<operation error="skip">
			<search><![CDATA[<!-- AddThis Button END -->]]></search>
			<add position="after" offset="1"><![CDATA[{{ column_inpro }}]]></add>
		</operation>
	</file>
    
	<file path="catalog/view/theme/*/template/common/header.twig">
		<operation error="skip">
			<search><![CDATA[</head>]]></search>
			<add position="before"><![CDATA[<link href="catalog/view/theme/default/stylesheet/vendor.css" rel="stylesheet">			
		]]></add>
		</operation>
        <operation error="skip">
			<search><![CDATA[<li><a href="{{ contact }}"><i class="fa fa-phone"></i></a> <span class="hidden-xs hidden-sm hidden-md">{{ telephone }}</span></li>]]></search>
			<add position="before"><![CDATA[<!--xml start-->
        <li><a href="{{ allseller }}"><i class="fa fa-users fa-fw"></i> {{ text_allseller }}</a></li>
        {% if vendorlogged %}
		<li class="dropdown"><a href="#" title="{{ text_selleraccount }}" class="dropdown-toggle" data-toggle="dropdown"><i class="fa fa-users"></i> <span class="hidden-xs hidden-sm hidden-md">{{ text_selleraccount }}</span> <span class="caret"></span></a>
          <ul class="dropdown-menu dropdown-menu-right">
            <li><a href="{{ vendor_profile }}"><i class="fa fa-user fa-fw"></i> {{ text_profile }}</a></li>
            <li><a href="{{ dashboard }}"><i class="fa fa-dashboard fa-fw"></i> {{ text_dashboard }}</a></li>
			
            <li><a href="{{ products }}"><i class="fa fa-list fa-fw"></i> {{ text_products }}</a></li>
            <li><a href="{{ review }}"><i class="fa fa-star fa-fw"></i> {{ text_review }}</a></li>
            <li><a href="{{ managestore }}"><i class="fa fa-cog fa-fw"></i> {{ text_managestore }}</a></li>
            <li><a href="{{ manageprofile }}"><i class="fa fa-user fa-fw"></i> {{ text_manageprofile }}</a></li>
            <li><a href="{{ download }}"><i class="fa fa-cloud-download fa-fw"></i> {{ text_download }}</a></li>
            <li><a href="{{ manufacture }}"><i class="fa fa-thumb-tack fa-fw"></i> {{ text_manufacture }}</a></li>
            <li><a href="{{ logouts }}"><i class="fa fa-sign-out fa-fw"></i> {{ text_logout }}</a></li>
          </ul>
        </li>
        {% else %}
            <li><a href="{{ sellerlogin }}"><i class="fa fa-sign-in fa-fw"></i> {{ text_loginseller }}</a></li>
        {% endif %}
		<!--xml end-->]]></add>
		</operation>
    </file>
    
	<file path="system/library/cart/cart.php">
		<operation error="skip">
			<search><![CDATA[$product_data[] = array(]]></search>
			<add position="before"><![CDATA[
			/// Get Product By Seller Name ///	
				$seller_query = $this->db->query("SELECT v.display_name,v.vendor_id FROM " . DB_PREFIX . "vendor_to_product v2p LEFT JOIN " . DB_PREFIX . "vendor v ON (v2p.vendor_id = v.vendor_id) WHERE v2p.product_id = '" . (int)$cart['product_id'] . "' ");				
				
				if(isset($seller_query->row['display_name'])){
					$sellerdisplay = $seller_query->row['display_name'];
				} else{
					$sellerdisplay ='';
				}
				if(isset($seller_query->row['vendor_id'])){
					$vendor_ids = $seller_query->row['vendor_id'];
				} else{
					$vendor_ids ='';
				}
				
			/// Get Product By Seller Name ///

			]]></add>
		</operation>
		
		<operation error="skip">
			<search><![CDATA['option'          => $option_data,]]></search>
			<add position="after"><![CDATA[/// Get Product By Seller Name ///
					'sellerdisplay'   => $sellerdisplay,
					'vendor_ids'      => $vendor_ids,
					/// Get Product By Seller Name ///]]></add>
		</operation>
	</file>
	
	<file path="admin/language/*/common/column_left.php">
		<operation error="skip">
			<search><![CDATA[// Text]]></search>
			<add position="after"><![CDATA[
			/* xml */
			$_['text_seller']                      = 'Seller';
			$_['text_manageseller']                = 'Manage Seller';
			$_['text_store']                       = 'Manage Store';
			$_['text_commission']                  = 'Commission';
			$_['text_commission_report']           = 'Commission Report';
			$_['text_sellerproduct']               = 'Seller Product';
			$_['text_sellerorder']                 = 'Order Report';
			$_['text_sellerreview']                = 'Seller Review';
			$_['text_reviewfield']                 = 'Review Field';
			$_['text_sellermail']                  = 'Mail';
			$_['text_income']                      = 'Income';
			$_['text_notification']                = 'Notification';
			$_['text_enquire']                     = 'Enquire';
			/* xml */
			]]></add>
		</operation>		
	</file>
	
	<file path="admin/controller/common/column_left.php">
		<operation error="skip">
			<search><![CDATA[// Extension]]></search>
			<add position="after"><![CDATA[
			// Seller
			$seller = array();
			
			if ($this->user->hasPermission('access', 'vendor/vendor')) {		
				$seller[] = array(
					'name'	   => $this->language->get('text_manageseller'),
					'href'     => $this->url->link('vendor/vendor', 'user_token=' . $this->session->data['user_token'], true),
					'children' => array()		
				);					
			}	
			
			/* if ($this->user->hasPermission('access', 'vendor/store')) {		
				$seller[] = array(
					'name'	   => $this->language->get('text_store'),
					'href'     => $this->url->link('vendor/store', 'user_token=' . $this->session->data['user_token'], true),
					'children' => array()
				);
			} */
					
			if ($this->user->hasPermission('access', 'vendor/commission')) {
				$seller[] = array(
					'name'	   => $this->language->get('text_commission'),
					'href'     => $this->url->link('vendor/commission', 'user_token=' . $this->session->data['user_token'], true),
					'children' => array()		
				);
			}
			
			if ($this->user->hasPermission('access', 'vendor/commission_report')) {
				$seller[] = array(
					'name'	   => $this->language->get('text_commission_report'),
					'href'     => $this->url->link('vendor/commission_report', 'user_token=' . $this->session->data['user_token'], true),
					'children' => array()		
				);
			}
			if ($this->user->hasPermission('access', 'vendor/product')) {
				$seller[] = array(
					'name'	   => $this->language->get('text_sellerproduct'),
					'href'     => $this->url->link('vendor/product', 'user_token=' . $this->session->data['user_token'], true),
					'children' => array()		
				);
			}
			if ($this->user->hasPermission('access', 'vendor/report')) {
				$seller[] = array(
					'name'	   => $this->language->get('text_sellerorder'),
					'href'     => $this->url->link('vendor/report', 'user_token=' . $this->session->data['user_token'], true),
					'children' => array()		
				);
			}
			if ($this->user->hasPermission('access', 'vendor/review')) {
				$seller[] = array(
					'name'	   => $this->language->get('text_sellerreview'),
					'href'     => $this->url->link('vendor/review', 'user_token=' . $this->session->data['user_token'], true),
					'children' => array()		
				);
			}
			if ($this->user->hasPermission('access', 'vendor/review_field')) {
				$seller[] = array(
					'name'	   => $this->language->get('text_reviewfield'),
					'href'     => $this->url->link('vendor/review_field', 'user_token=' . $this->session->data['user_token'], true),
					'children' => array()		
				);
			}
					
			if ($this->user->hasPermission('access', 'vendor/mail')) {
				$seller[] = array(
					'name'	   => $this->language->get('text_sellermail'),
					'href'     => $this->url->link('vendor/mail', 'user_token=' . $this->session->data['user_token'], true),
					'children' => array()		
				);
			}
					
			if ($this->user->hasPermission('access', 'vendor/income')) {
				$seller[] = array(
					'name'	   => $this->language->get('text_income'),
					'href'     => $this->url->link('vendor/income', 'user_token=' . $this->session->data['user_token'], true),
					'children' => array()		
				);
			}	
			if ($this->user->hasPermission('access', 'vendor/notification')) {
				$seller[] = array(
					'name'	   => $this->language->get('text_notification'),
					'href'     => $this->url->link('vendor/notification', 'user_token=' . $this->session->data['user_token'], true),
					'children' => array()		
				);
			}
			
				
			if ($this->user->hasPermission('access', 'vendor/enquiry')) {
				$seller[] = array(
					'name'	   => $this->language->get('text_enquire'),
					'href'     => $this->url->link('vendor/enquiry', 'user_token=' . $this->session->data['user_token'], true),
					'children' => array()		
				);
			}
					
			if ($seller) {					
				$data['menus'][] = array(
					'id'       => 'menu-seller',
					'icon'	   => 'fa-users fw', 
					'name'	   => $this->language->get('text_seller'),
					'href'     => '',
					'children' => $seller
				);		
			}
			
			]]></add>
		</operation>		
	</file>
	
	<file path="admin/language/*/en-gb.php">
		<operation error="skip">
			<search><![CDATA[// Text]]></search>
			<add position="after"><![CDATA[
			/* xml */
			$_['text_byseller']         = 'By Seller';
			/* xml */
			]]></add>
		</operation>		
	</file>
    
	<file path="admin/controller/sale/order.php">
		<operation error="skip">
			<search><![CDATA[$data['text_loading'] = $this->language->get('text_loading');]]></search>
			<add position="after"><![CDATA[
			/* xml */
			$data['text_byseller'] = $this->language->get('text_byseller');
			/* xml */
			]]></add>
		</operation>
		
		<operation error="skip">
			<search><![CDATA[$data['products'][] = array(]]></search>
			<add position="before"><![CDATA[
			/* xml */
					$this->load->model('vendor/vendor');
				$seller_info = $this->model_vendor_vendor->getVendor($product['vendor_id']);
				if(isset($seller_info['display_name'])){
					$sellername = $seller_info['display_name'];
				} else {
					$sellername ='';
				}
				if(isset($seller_info['vendor_id'])){
					$ids = $seller_info['vendor_id'];
				} else {
					$ids ='';
				}				
				/* xml */
			]]></add>
		</operation>
		<operation error="skip">
			<search><![CDATA['option'   		   => $option_data,]]></search>
			<add position="after"><![CDATA[
			/* xml */			
			'sellername'   	   => $sellername,
			'sellerhref'       => $this->url->link('vendor/vendor/edit', 'user_token=' . $this->session->data['user_token'] . '&vendor_id=' . $ids, true),			
			/* xml */
			]]></add>
		</operation>		
	</file>
	
	<file path="admin/model/sale/order.php">
		<operation error="skip">
			<search><![CDATA[$query = $this->db->query("SELECT * FROM " . DB_PREFIX . "order_product WHERE order_id = '" . (int)$order_id . "'");]]></search>
			<add position="replace"><![CDATA[
			/* update xml */
			$query = $this->db->query("SELECT * FROM " . DB_PREFIX . "order_product op LEFT JOIN " . DB_PREFIX . "vendor_order_product vop ON (op.order_id = vop.order_id) WHERE op.order_id = '" . (int)$order_id . "' GROUP BY vop.order_product_id");
			/* update xml */
			]]></add>
		</operation>				
	</file>
    
	<file path="admin/view/template/sale/order_info.twig">
		<operation error="skip">
			<search><![CDATA[<td class="text-left"><a href="{{ product.href }}">{{ product.name }}</a>]]></search>
			<add position="replace"><![CDATA[
			<td class="text-left"><a href="{{ product.href }}">{{ product.name }}</a>
			{% if product.sellername %}
			{{ text_byseller }} <a href="{{ product.sellerhref }}"> {{ product.sellername }} </a>
			{% endif %}
			]]></add>
		</operation>				
	</file>
	
	<file path="catalog/controller/checkout/cart.php">
		<operation error="skip">
			<search><![CDATA[$data['products'][] = array(]]></search>
			<add position="before"><![CDATA[
				/* xml */
				if(isset($product['sellerdisplay'])){
				$sellerdisplay = $product['sellerdisplay'];
				} else {
				$sellerdisplay = '';
				}
				
				if(isset($product['vendor_ids'])){
				$vendor_ids = $product['vendor_ids'];
				} else {
				$vendor_ids = '';
				}
				/* xml */
				]]></add>
		</operation>
		
		<operation error="skip">
			<search><![CDATA['name'      => $product['name'],]]></search>
			<add position="after"><![CDATA[
				/* xml */					
					'sellerdisplay'   => $sellerdisplay,
					'vendor_ids'      => $this->url->link('vendor/vendor_profile', 'vendor_id=' .$vendor_ids),				
					/* xml */
				]]></add>
		</operation>		
	</file>

	<file path="catalog/controller/common/cart.php">
		<operation error="skip">
			<search><![CDATA[$data['products'][] = array(]]></search>
			<add position="before"><![CDATA[
				/* xml */
				if(isset($product['sellerdisplay'])){
				$sellerdisplay = $product['sellerdisplay'];
				} else {
				$sellerdisplay = '';
				}
				
				if(isset($product['vendor_ids'])){
				$vendor_ids = $product['vendor_ids'];
				} else {
				$vendor_ids = '';
				}
				/* xml */
				]]></add>
		</operation>
		
		<operation error="skip">
			<search><![CDATA['name'      => $product['name'],]]></search>
			<add position="after"><![CDATA[
				/* xml */
				'sellerdisplay'   => $sellerdisplay,
				'vendor_ids'      => $this->url->link('vendor/vendor_profile', 'vendor_id=' .$vendor_ids),
				/* xml */
				]]></add>
		</operation>		
	</file>
	
	<file path="catalog/view/theme/*/template/checkout/cart.twig">
		<operation error="skip">
			<search><![CDATA[<td class="text-left"><a href="{{ product.href }}">{{ product.name }}</a> {% if not product.stock %} <span class="text-danger">***</span> {% endif %}]]></search>
			<add position="replace"><![CDATA[
			<!-- xml -->
			<td class="text-left">
				<a href="{{ product.href }}">{{ product.name }}</a> {% if not product.stock %} <span class="text-danger">***</span> {% endif %}
				{% if product.sellerdisplay %}
				{{ text_byseller }}
				<a href="{{ product.vendor_ids }}">{{ product.sellerdisplay }}</a>
				{% endif %}
				<!-- xml -->
				]]></add>
		</operation>		
	</file>
	
	<file path="catalog/view/theme/*/template/common/cart.twig">
		<operation error="skip">
			<search><![CDATA[<td class="text-left"><a href="{{ product.href }}">{{ product.name }}</a> {% if product.option %}]]></search>
			<add position="replace"><![CDATA[
				  <!-- xml -->
				   <td class="text-left td-name"><a href="{{ product.href }}">{{ product.name }}</a>				   
				{% if product.sellerdisplay %}
			 {{ text_byseller }}
				<a href="{{ product.vendor_ids }}">{{ product.sellerdisplay }}</a>
				{% endif %}
				 {% if product.option %}
				<!-- xml -->
				]]></add>
		</operation>		
	</file>
    
    <file path="catalog/view/theme/*/template/checkout/confirm.twig">
		<operation error="skip">
			<search><![CDATA[<td class="text-left"><a href="{{ product.href }}">{{ product.name }}</a> {% for option in product.option %} <br />]]></search>
			<add position="replace"><![CDATA[
				<!-- xml -->
				<td class="text-left">				
				<a href="{{ product.href }}">{{ product.name }}</a> {% if product.sellerdisplay %}
				 &nbsp; {{ text_byseller }}
				<a href="{{ product.vendor_ids }}">{{ product.sellerdisplay }}</a>
				{% endif %}
				{% for option in product.option %} <br />
				<!-- xml -->
				]]></add>
		</operation>		
	</file>
    <file path="catalog/controller/checkout/confirm.php">
		<operation error="skip">
			<search><![CDATA[$data['products'][] = array(]]></search>
			<add position="before"><![CDATA[
				/* xml */
				if(isset($product['sellerdisplay'])){
				$sellerdisplay = $product['sellerdisplay'];
				} else {
				$sellerdisplay = '';
				}
				
				if(isset($product['vendor_ids'])){
				$vendor_ids = $product['vendor_ids'];
				} else {
				$vendor_ids = '';
				}
				/* xml */
				]]></add>
		</operation>
		<operation error="skip">
			<search><![CDATA['cart_id'    => $product['cart_id'],]]></search>
			<add position="after"><![CDATA[
				/* xml */					
					'sellerdisplay'   => $sellerdisplay,
					'vendor_ids'      => $this->url->link('vendor/vendor_profile', 'vendor_id=' .$vendor_ids),				
					/* xml */
				]]></add>
		</operation>		
	</file>
	
    <file path="catalog/view/theme/*/template/checkout/cart.twig">
		<operation error="skip">
			<search><![CDATA[<td class="text-left td-name"><a href="{{ product.href }}">{{ product.name }}</a> {% if not product.stock %} <span class="text-danger">***</span> {% endif %}]]></search>
			<add position="replace"><![CDATA[
			<!-- xml -->
			<td class="text-left">
				<a href="{{ product.href }}">{{ product.name }}</a> {% if not product.stock %} <span class="text-danger">***</span> {% endif %}
				{% if product.sellerdisplay %}
				{{ text_byseller }}
				<a href="{{ product.vendor_ids }}">{{ product.sellerdisplay }}</a>
				{% endif %}
				<!-- xml -->
				]]></add>
		</operation>		
	</file>
	<file path="catalog/view/theme/*/template/mail/order.twig">
		<operation error="skip">
			<search><![CDATA[{% for option in product.option %}]]></search>
			<add position="before"><![CDATA[
				<!-- xml -->
				{% if product.sellerdisplay %}
				 {{ text_byseller }}
				<a href="{{ product.vendor_ids }}">{{ product.sellerdisplay }}</a>
				{% endif %}
				<!-- xml -->
				]]></add>
		</operation>		
	</file>
	
	
	<file path="catalog/language/*/en-gb.php">
		<operation error="skip">
			<search><![CDATA[// Text]]></search>
			<add position="after"><![CDATA[
			/* xml */
			$_['text_byseller']         = 'By Seller';			
			$_['button_add']            = 'Add';
			$_['button_save']           = 'Save';
			$_['button_parent']         = 'Parent';
			$_['button_folder']         = 'New Folder';
			$_['button_refresh']        = 'Refresh';

			/* xml */
			]]></add>
		</operation>		
	</file>
	
	
	<file path="catalog/controller/account/order.php">		
		<operation error="skip">
			<search><![CDATA[$voucher_total = $this->model_account_order->getTotalOrderVouchersByOrderId($result['order_id']);]]></search>
			<add position="after"><![CDATA[
			/* xml */
			$this->load->model('vendor/vendor');
			$orderstatus_info = $this->model_vendor_vendor->getCustomerOrder($result['order_id']);
			if(isset($orderstatus_info['order_status_id'])){
			$order_status_id = $orderstatus_info['order_status_id'];
			} else {
			$order_status_id =0;		
			}
			$status_info = $this->model_vendor_vendor->getCustomerOrderStatus($order_status_id);
			if(isset($status_info['name'])) {
				$statusname = $status_info['name'];
			} else {
				$statusname='';
			}
			/* xml */
			]]></add>
		</operation>
		
		<operation error="skip">
			<search><![CDATA['status'     => $result['status'],]]></search>
			<add position="after"><![CDATA[
			/* xml */
			'statusname' => $statusname,
			'order_status_id' => $order_status_id,
			/* xml */
			]]></add>
		</operation>
		<operation error="skip">
			<search><![CDATA[if (isset($this->session->data['error'])) {]]></search>
			<add position="before"><![CDATA[
			/* xml */
			$data['column_tracking'] = $this->language->get('column_tracking');
			/* xml */
			]]></add>
		</operation>
		
		<operation error="skip">
			<search><![CDATA[$data['histories'][] = array(]]></search>
			<add position="before"><![CDATA[
			/* xml */
			$this->load->model('vendor/vendor');
			$orderstatus_info = $this->model_vendor_vendor->getCustomerOrder($this->request->get['order_id']);
			if(isset($orderstatus_info['order_status_id'])){
			$order_status_id = $orderstatus_info['order_status_id'];
			} else {
			$order_status_id =0;		
			}
				$status_info = $this->model_vendor_vendor->getCustomerOrderStatus($order_status_id);
				if(isset($status_info['name'])) {
					$statusname = $status_info['name'];
				} else {
					$statusname='';
				}
			/* xml */
			]]></add>
		</operation>
		<operation error="skip">
			<search><![CDATA[$data['products'][] = array(]]></search>
			<add position="before"><![CDATA[
			/* xml */
			$this->load->model('vendor/vendor');
			$tracking_info = $this->model_vendor_vendor->getCustomerOrder($order_info['order_id']);
			if(isset($tracking_info['tracking'])){
			$tracking = $tracking_info['tracking'];
			} else {
				$tracking = '';
			}
			/* xml */
			]]></add>
		</operation>
		
		<operation error="skip">
			<search><![CDATA['quantity' => $product['quantity'],]]></search>
			<add position="before"><![CDATA[
			/* xml */
			'tracking' => $tracking,
			/* xml */
			]]></add>
		</operation>		
	</file>
	
	<file path="catalog/view/theme/*/template/account/order_info.twig">
		<operation error="skip">
			<search><![CDATA[<td class="text-right">{{ column_quantity }}</td>]]></search>
			<add position="after"><![CDATA[
			 <!-- xml -->  
              {% if not tracking_code == '0' %} 
              <td class="text-right">{{ column_tracking }}</td>
              </td>
              {% endif %}
          <!-- 09 06 2018 -->
		  ]]></add>
		</operation>
		
		<operation error="skip">
			<search><![CDATA[<td class="text-right">{{ product.quantity }}</td>]]></search>
			<add position="after"><![CDATA[
			 <!-- xml -->    
              <td class="text-right">
                {% if product.tracking != '0' %}
                {{ product.tracking }}
                {% endif %}
              </td>
          <!-- 09 06 2018 -->
		  ]]></add>
		</operation>
		<operation error="skip">
			<search><![CDATA[<td class="text-left">{{ history.quantity }}</td>]]></search>
			<add position="replace"><![CDATA[
			 <!--xml -->
            <td class="text-left">
              {% if history.order_status_id =='1' %}
              {{ history.status }}
              {% else %}
              {{ history.statusname }}
              {% endif %}
            </td>
            <!-- xml -->
		  ]]></add>
		</operation>
		<operation error="skip">
			<search><![CDATA[colspan="3"]]></search>
			<add position="replace"><![CDATA[colspan="4"]]></add>
		</operation>
	</file>
	
	<file path="catalog/view/theme/*/template/account/order_list.twig">
		<operation error="skip">
			<search><![CDATA[<td class="text-left">{{ order.status }}</td>]]></search>
			<add position="repalce"><![CDATA[
			 <!-- xml -->    
              <td class="text-left">
                {% if order.order_status_id =='1' %}
                    {{ order.status }}        
                {% else %}
                 {{ order.statusname }}
				{% endif %} 
              </td> 
          <!-- xml -->
		  ]]></add>
		</operation>
	</file>
	
	<file path="catalog/language/*/account/order.php">
		<operation error="skip">
			<search><![CDATA[// Column]]></search>
			<add position="after"><![CDATA[
			/* xml */
			$_['column_tracking']       = 'Tracking No';
			/* xml */
		  ]]></add>
		</operation>
	</file>
	
	<file path="catalog/controller/startup/seo_url.php">
		<operation error="log">
			<search ><![CDATA[if (!isset($this->request->get['route'])) {]]></search>
			<add position="before"><![CDATA[
			/////////////// TMD vendor SEO work 
			$query1 = $this->db->query("SELECT * FROM " . DB_PREFIX . "seo_url WHERE keyword = '" . $this->db->escape($part) . "'");
			
			if($query1->num_rows) {
			$url = explode('=', $query1->row['query']);
				unset($this->request->get['route']);
					if ($url[0] == 'vendor_id') {
						$this->request->get['vendor_id'] = $url[1];
						$this->request->get['route'] = 'vendor/vendor_profile';
					}
					
			}
			/////////////// TMD vendor SEO work 
			]]></add>
		</operation>
		
		<operation error="log">
			<search><![CDATA[} elseif ($key == 'path') {]]></search>
			<add position="replace"><![CDATA[
			/////////////////////xml
			}
				else if(($data['route'] == 'vendor/vendor_profile' && $key == 'vendor_id'))
				{
					$url=str_replace('/vendor/vendor_profile','',$url);
					$query = $this->db->query("SELECT * FROM " . DB_PREFIX . "seo_url WHERE `query` = '" . $this->db->escape($key . '=' . (int)$value) . "'");
					if ($query->num_rows && $query->row['keyword']) {
						
						$url .= '/' . $query->row['keyword'];

						unset($data[$key]);
					}
				}
				 elseif ($key == 'path') {
				/////////////////////xml]]></add>
		</operation>
	</file>
	
	<file path="catalog/controller/mail/order.php">
	<operation error="skip">
			<search><![CDATA[$mail->setHtml($this->load->view('mail/order_add', $data));]]></search>
			<add position="after" offset="1"><![CDATA[
				/* xml */
				/// Seller Alert Mail ////

			$emailtemplete = $this->db->query("SELECT * from " . DB_PREFIX . "vendor_mail vm left join " . DB_PREFIX . "vendor_mail_language vml on vml.mail_id=vm.mail_id WHERE vm.sellertype = 'customer_to_seller_order_email' and vml.language_id='".$this->config->get('config_language_id')."' and vm.status='1'");	
					if(!empty($emailtemplete->row))
					{
					$subject=$emailtemplete->row['subject'];
					$message=$emailtemplete->row['message'];
			$orderss_query = $this->db->query("SELECT vendor_id FROM " . DB_PREFIX . "vendor_order_product WHERE order_id = '" .$order_info['order_id'] . "' group by vendor_id");
			
			if(!empty($orderss_query->rows))
			{
			
				foreach($orderss_query->rows as $vendorids)
				{	
					
					$vendor_id=$vendorids['vendor_id'];
					$vendorinfo = $this->db->query("SELECT * from " . DB_PREFIX . "vendor WHERE vendor_id = '" .$vendor_id. "'");	
					if(!empty($vendorinfo->row['email']))
					{
						// Products
						$seller_product_query = $this->db->query("SELECT * FROM " . DB_PREFIX . "order_product  op LEFT JOIN " . DB_PREFIX . "vendor_order_product vop ON (op.order_id = vop.order_id) WHERE op.order_id = '" . (int)$order_info['order_id'] . "' and vop.vendor_id='".$vendor_id."' GROUP BY vop.order_product_id");
				
				
					$sellerproduct['products'] = array();
		
					foreach ($seller_product_query->rows as $product) {
						$option_data = array();
		
						$order_option_query = $this->db->query("SELECT * FROM " . DB_PREFIX . "order_option WHERE order_id = '" . (int)$order_info['order_id'] . "' AND order_product_id = '" . (int)$product['order_product_id'] . "'");
		
						foreach ($order_option_query->rows as $option) {
							if ($option['type'] != 'file') {
								$value = $option['value'];
							} else {
								$upload_info = $this->model_tool_upload->getUploadByCode($option['value']);
		
								if ($upload_info) {
									$value = $upload_info['name'];
								} else {
									$value = '';
								}
							}
		
							$option_data[] = array(
								'name'  => $option['name'],
								'value' => (utf8_strlen($value) > 20 ? utf8_substr($value, 0, 20) . '..' : $value)
							);
						}
		

							/* xml start */
							$this->load->model('vendor/vendor');
							$seller_info = $this->model_vendor_vendor->getVendor($product['vendor_id']);
								
							if ($this->request->server['HTTPS']) {
							$server = $this->config->get('config_ssl');
							} else {
							$server = $this->config->get('config_url');
							}

							if(isset($seller_info['display_name'])){
							$sellerdisplay = $seller_info['display_name'];
							} else{
								$sellerdisplay ='';
							}
					if(isset($seller_info['vendor_id'])){
						$vendor_ids = $server .'index.php?route=vendor/vendor_profile&'.'&vendor_id=' . $seller_info['vendor_id'];
					} else{
						$vendor_ids ='';
					}
					
					
						$sellerproduct['products'][] = array(
							'name'     => $product['name'],
							'sellerdisplay'   => $sellerdisplay,
							'vendor_ids'      => $vendor_ids,			
							'model'    => $product['model'],
							'option'   => $option_data,
							'quantity' => $product['quantity'],
							'price'    => $this->currency->format($product['price'] + ($this->config->get('config_tax') ? $product['tax'] : 0), $order_info['currency_code'], $order_info['currency_value']),
							'total'    => $this->currency->format($product['total'] + ($this->config->get('config_tax') ? ($product['tax'] * $product['quantity']) : 0), $order_info['currency_code'], $order_info['currency_value'])
						);
					}
						$sellerproduct['shipping_address']=$data['shipping_address'];
						$sellerproduct['text_shipping_address']=$data['text_shipping_address'];
						$sellerproduct['text_product']=$data['text_product'];
						$sellerproduct['text_model']=$data['text_model'];
						$sellerproduct['text_quantity']=$data['text_quantity'];
						$sellerproduct['text_price']=$data['text_price'];
						$sellerproduct['text_total']=$data['text_total'];
						$sellerproduct['title']=$data['title'];
						$product_info=$this->load->view('mail/seller_order', $sellerproduct);
						$find = array(
							'{order_id}',
							'{display_name}',
							'{email}',											
							'{seller_telephone}',											
							'{address_1}',										
							'{seller_lastname}'	,									
							'{seller_firstname}',						
							'{product_info}'						
						);
						$replace = array(
							'order_id' => $order_info['order_id'],
							'display_name'=> $vendorinfo->row['display_name'],
							'email' 	=> $vendorinfo->row['email'],
							'seller_telephone' => $vendorinfo->row['telephone'],
							'seller_lastname' => $vendorinfo->row['lastname'],
							'seller_firstname' => $vendorinfo->row['firstname'],
							'product_info' => $product_info,
							
							
						);	
						
						$subject= str_replace(array("\r\n", "\r", "\n"), '<br />', preg_replace(array("/\s\s+/", "/\r\r+/", "/\n\n+/"), '<br />', trim(str_replace($find, $replace, $subject))));
						$message= str_replace(array("\r\n", "\r", "\n"), '<br />', preg_replace(array("/\s\s+/", "/\r\r+/", "/\n\n+/"), '<br />', trim(str_replace($find, $replace, $message))));
						
						$mail = new Mail();
						$mail->protocol = $this->config->get('config_mail_protocol');
						$mail->parameter = $this->config->get('config_mail_parameter');
						$mail->smtp_hostname = $this->config->get('config_mail_smtp_hostname');
						$mail->smtp_username = $this->config->get('config_mail_smtp_username');
						$mail->smtp_password = html_entity_decode($this->config->get('config_mail_smtp_password'), ENT_QUOTES, 'UTF-8');
						$mail->smtp_port = $this->config->get('config_mail_smtp_port');
						$mail->smtp_timeout = $this->config->get('config_mail_smtp_timeout');
						 $vendorinfo->row['email'];
						$mail->setTo($vendorinfo->row['email']);
						$mail->setFrom($this->config->get('config_email'));
						$mail->setSender(html_entity_decode($order_info['store_name'], ENT_QUOTES, 'UTF-8'));
						$mail->setSubject(html_entity_decode($subject, ENT_QUOTES, 'UTF-8'));
						$mail->setHtml(html_entity_decode($message, ENT_QUOTES, 'UTF-8'));
						$mail->send();
						
					}
					
				}
			}
			
			}


			/// Seller Alert Mail ////
				/* xml */	]]></add>
		</operation>
	</file>	
	<file path="catalog/model/journal3/order.php">
		<operation error="log">
			<search ><![CDATA[$order_product_id = $this->db->getLastId();]]></search>
			<add position="after"><![CDATA[
			/// xml start ///				
				$commisioninfo=$this->getOrderCommission($product['product_id'],$product['total']);
				if(isset($commisioninfo)){
				
				$this->db->query("DELETE FROM " . DB_PREFIX ."vendor_order_product WHERE vendor_id='".(int)$commisioninfo['vendor_id']."' AND order_id = '" . (int)$order_id . "' AND product_id = '" . (int)$product['product_id'] . "'");
				
				$this->db->query("INSERT INTO " . DB_PREFIX . "vendor_order_product SET order_product_id='".(int)$order_product_id."',order_id = '" . (int)$order_id . "',product_id = '" . (int)$product['product_id'] . "',name = '" . $this->db->escape($product['name']) . "', model = '" . $this->db->escape($product['model']) . "', quantity = '" . (int)$product['quantity'] . "', price = '" . (float)$product['price'] . "', total = '" . (float)$product['total'] . "', tax = '" . (float)$product['tax'] . "', reward = '" . (int)$product['reward'] . "',commissionper='".$commisioninfo['commissionper']."',vendor_id='".$commisioninfo['vendor_id']."',commissionfix='".$commisioninfo['commissionfix']."',totalcommission='".$commisioninfo['totalcommission']."', order_status_id = 1, date_added = NOW()");
				}
				/// xml End ///
			]]></add>
		</operation>
		
		<operation error="log">
			<search><![CDATA[private function getOrder($order_id) {]]></search>
			<add position="before"><![CDATA[
			/// XML Start ///	
		public function getOrderCommission($product_id,$total) {
			$data=array(
				'vendor_id'=>'',
				'commissionper'=>'',
				'commissionfix'=>'',
				'totalcommission'=>''
			);
			$commissionstatus = false;
			
			$seller_info = $this->db->query("SELECT vendor_id FROM " . DB_PREFIX . "vendor_to_product WHERE product_id = '" . (int)$product_id . "'");
			if(isset($seller_info->row['vendor_id'])) {
				$vendor_id = $seller_info->row['vendor_id'];
			}
			$query = $this->db->query("SELECT * FROM " . DB_PREFIX . "product_to_category WHERE product_id = '" . (int)$product_id . "'");
			
			if(isset($query->row['category_id'],$vendor_id)){
				
				$commission_info = $this->db->query("SELECT * FROM " . DB_PREFIX . "vendor_commission WHERE category_id = '" . $query->row['category_id'] . "'");
				
				if(isset($commission_info->row['category_id'])){
					$commissionper = $commission_info->row['percentage'];
					$commissionfix = $commission_info->row['fixed'];
					$totalcommission=($total * $commissionper/100)+$commissionfix;
					$data=array(
						'vendor_id'=>$vendor_id,
						'commissionper'=>$commissionper,
						'commissionfix'=>$commissionfix,
						'totalcommission'=>$totalcommission
					);
					$commissionstatus = true;
				}
			} 
			if(!$commissionstatus){
					
				$vendorinfo = $this->db->query("SELECT v2p.vendor_id, vs.commission FROM " . DB_PREFIX . "vendor_to_product v2p LEFT JOIN " . DB_PREFIX . "vendor vs ON (v2p.vendor_id = vs.vendor_id) WHERE v2p.product_id = '" .$product_id. "'");	
				
				if(isset($vendorinfo->row['commission'])){
				$vendorcomision = $vendorinfo->row['commission'];
				} else {
				$vendorcomision = '';	
				}
				if(isset($vendorinfo->row['vendor_id'])){
				$vendor_ids = $vendorinfo->row['vendor_id'];
				} else {
				$vendor_ids = '';	
				}
				
				$commissionper = $vendorcomision;
				$vendor_id = $vendor_ids;
				$commissionfix = 0;
				$totalcommission=($total * $commissionper/100)+$commissionfix;
				$data=array(
					'vendor_id'=>$vendor_id,
					'commissionper'=>$commissionper,
					'commissionfix'=>$commissionfix,
					'totalcommission'=>$totalcommission
				);							
			}
			return $data;		
		}
		/// xml End ///
			]]></add>
		</operation>		
	</file>	
	
	<file path="catalog/model/checkout/order.php">
		<operation error="log">
			<search><![CDATA[$query = $this->db->query("SELECT * FROM " . DB_PREFIX . "order_product WHERE order_id = '" . (int)$order_id . "'");]]></search>
			<add position="repalce"><![CDATA[$query = $this->db->query("SELECT * FROM " . DB_PREFIX . "order_product  op LEFT JOIN " . DB_PREFIX . "vendor_order_product vop ON (op.order_id = vop.order_id) WHERE op.order_id = '" . (int)$order_id . "' GROUP BY vop.order_product_id");]]></add>
		</operation>
		
		<operation error="log">
			<search><![CDATA[$this->db->query("DELETE FROM `" . DB_PREFIX . "order` WHERE order_id = '" . (int)$order_id . "'");]]></search>
			<add position="after"><![CDATA[
				/* xml start */					
				$this->db->query("DELETE FROM `" . DB_PREFIX . "vendor_order_product` WHERE order_id = '" . (int)$order_id . "'");		
				/* xml end */
				]]></add>
		</operation>	
		
		<operation error="log">
			<search><![CDATA[// Update the DB with the new statuses]]></search>
			<add position="before"><![CDATA[
				/* xml */
				$this->db->query("UPDATE `" . DB_PREFIX . "vendor_order_product` SET order_status_id='".(int)$order_status_id."', date_modified=now() WHERE order_id = '" . (int)$order_id . "'");
				/* xml */
				]]></add>
		</operation>
		
		<operation error="log">
			<search><![CDATA[$order_product_id = $this->db->getLastId();]]></search>
			<add position="after"><![CDATA[
			/// xml start ///				
				$commisioninfo=$this->getOrderCommission($product['product_id'],$product['total']);
				if(isset($commisioninfo)){
				
				$this->db->query("DELETE FROM " . DB_PREFIX ."vendor_order_product WHERE vendor_id='".(int)$commisioninfo['vendor_id']."' AND order_id = '" . (int)$order_id . "' AND product_id = '" . (int)$product['product_id'] . "'");
				
				$this->db->query("INSERT INTO " . DB_PREFIX . "vendor_order_product SET order_product_id='".(int)$order_product_id."',order_id = '" . (int)$order_id . "',product_id = '" . (int)$product['product_id'] . "',name = '" . $this->db->escape($product['name']) . "', model = '" . $this->db->escape($product['model']) . "', quantity = '" . (int)$product['quantity'] . "', price = '" . (float)$product['price'] . "', total = '" . (float)$product['total'] . "', tax = '" . (float)$product['tax'] . "', reward = '" . (int)$product['reward'] . "',commissionper='".$commisioninfo['commissionper']."',vendor_id='".$commisioninfo['vendor_id']."',commissionfix='".$commisioninfo['commissionfix']."',totalcommission='".$commisioninfo['totalcommission']."', order_status_id = 1, date_added = NOW()");
				}
				]]></add>
		</operation>
		<operation error="log">
			<search><![CDATA[public function editOrder($order_id, $data) {]]></search>
			<add position="before"><![CDATA[
					/// XML Start ///	
		public function getOrderCommission($product_id,$total) {
			$data=array(
				'vendor_id'=>'',
				'commissionper'=>'',
				'commissionfix'=>'',
				'totalcommission'=>''
			);
			$commissionstatus = false;
			
			$seller_info = $this->db->query("SELECT vendor_id FROM " . DB_PREFIX . "vendor_to_product WHERE product_id = '" . (int)$product_id . "'");
			if(isset($seller_info->row['vendor_id'])) {
				$vendor_id = $seller_info->row['vendor_id'];
			}
			$query = $this->db->query("SELECT * FROM " . DB_PREFIX . "product_to_category WHERE product_id = '" . (int)$product_id . "'");
			
			if(isset($query->row['category_id'],$vendor_id)){
				
				$commission_info = $this->db->query("SELECT * FROM " . DB_PREFIX . "vendor_commission WHERE category_id = '" . $query->row['category_id'] . "'");
				
				if(isset($commission_info->row['category_id'])){
					$commissionper = $commission_info->row['percentage'];
					$commissionfix = $commission_info->row['fixed'];
					$totalcommission=($total * $commissionper/100)+$commissionfix;
					$data=array(
						'vendor_id'=>$vendor_id,
						'commissionper'=>$commissionper,
						'commissionfix'=>$commissionfix,
						'totalcommission'=>$totalcommission
					);
					$commissionstatus = true;
				}
			} 
			if(!$commissionstatus){
					
				$vendorinfo = $this->db->query("SELECT v2p.vendor_id, vs.commission FROM " . DB_PREFIX . "vendor_to_product v2p LEFT JOIN " . DB_PREFIX . "vendor vs ON (v2p.vendor_id = vs.vendor_id) WHERE v2p.product_id = '" .$product_id. "'");	
				
				if(isset($vendorinfo->row['commission'])){
				$vendorcomision = $vendorinfo->row['commission'];
				} else {
				$vendorcomision = '';	
				}
				if(isset($vendorinfo->row['vendor_id'])){
				$vendor_ids = $vendorinfo->row['vendor_id'];
				} else {
				$vendor_ids = '';	
				}
				
				$commissionper = $vendorcomision;
				$vendor_id = $vendor_ids;
				$commissionfix = 0;
				$totalcommission=($total * $commissionper/100)+$commissionfix;
				$data=array(
					'vendor_id'=>$vendor_id,
					'commissionper'=>$commissionper,
					'commissionfix'=>$commissionfix,
					'totalcommission'=>$totalcommission
				);							
			}
			return $data;		
		}
		/// xml End ///
				]]></add>
		</operation>
		
	</file>	
    
    <file path="catalog/view/theme/journal2/template/product/product.twig">
		<operation error="skip">
			<search><![CDATA[{% for tab in journal2.settings.get('additional_product_description_bottom', []) %}]]></search>
			<add position="before"><![CDATA[{{ column_inpro }}]]></add>
		</operation>
	</file>
    
    <file path="catalog/view/theme/journal2/template/common/header.twig">
		<operation error="skip">
			<search><![CDATA[</head>]]></search>
			<add position="before"><![CDATA[<link href="catalog/view/theme/journal2/css/vendor.css" rel="stylesheet">			
		]]></add>
		</operation>
    </file>
    
    <file path="catalog/view/theme/journal3/template/common/header.twig">
		<operation error="skip">
			<search><![CDATA[</head>]]></search>
			<add position="before"><![CDATA[<link href="catalog/view/theme/journal3/css/vendor.css" rel="stylesheet">			
		]]></add>
		</operation>
    </file>

    <file path="catalog/view/theme/journal2/template/journal2/headers/*.twig">
		<operation error="skip">
			<search><![CDATA[<ul class="top-menu">]]></search>
			<add position="after"><![CDATA[<!--xml start-->
        <li class="seller"><a href="{{ allseller }}"><i class="fa fa-users fa-fw"></i> <span class="m-text">{{ text_allseller }}</span></a></li>
         {% if vendorlogged %}
		<li class="seller dropdown"><a href="#" title="{{ text_selleraccount }}" class="dropdown-toggle" data-toggle="dropdown"><i class="fa fa-users"></i> <span class="m-text">{{ text_selleraccount }}</span> <span class="caret"></span></a>
          <ul class="dropdown-menu dropdown-menu-right">
           
            <li><a href="{{ vendor_profile }}"><i class="fa fa-user fa-fw"></i> {{ text_profile }}</a></li>
            <li><a href="{{ dashboard }}"><i class="fa fa-dashboard fa-fw"></i> {{ text_dashboard }}</a></li>
            <li><a href="{{ products }}"><i class="fa fa-list fa-fw"></i> {{ text_products }}</a></li>
            <li><a href="{{ review }}"><i class="fa fa-star fa-fw"></i> {{ text_review }}</a></li>
            <li><a href="{{ managestore }}"><i class="fa fa-cog fa-fw"></i> {{ text_managestore }}</a></li>
            <li><a href="{{ manageprofile }}"><i class="fa fa-user"></i> {{ text_manageprofile }}</a></li>
            <li><a href="{{ download }}"><i class="fa fa-cloud-download fa-fw"></i> {{ text_download }}</a></li>
            <li><a href="{{ manufacture }}"><i class="fa fa-thumb-tack fa-fw"></i> {{ text_manufacture }}</a></li>
            <li><a href="{{ logouts }}"><i class="fa fa-sign-out fa-fw"></i> {{ text_logout }}</a></li>
          </ul>
        </li>
        {% else %}
            <li class="seller"><a href="{{ sellerlogin }}"><i class="fa fa-sign-in fa-fw"></i> <span class="m-text">{{ text_loginseller }}</span></a></li>
            {% endif %}
		<!--xml end-->]]></add>
		</operation>
	</file>
    
    <file path="catalog/view/theme/journal3/template/journal3/headers/*/*.twig">
		<operation error="skip">
			<search><![CDATA[<div class="language-currency top-menu">]]></search>
			<add position="before"><![CDATA[<!--xml start-->
         <div class="top-menu">
            <ul class="j-menu seller">
        <li><a href="{{ allseller }}"><i class="fa fa-users fa-fw"></i> <span class="m-text">{{ text_allseller }}</span></a></li>
         {% if vendorlogged %}
		<li class="dropdown"><a href="#" title="{{ text_selleraccount }}" class="dropdown-toggle" data-toggle="dropdown"><i class="fa fa-users"></i> <span class="m-text">{{ text_selleraccount }}</span></a>
          <ul class="dropdown-menu dropdown-menu-right">
           
            <li><a href="{{ vendor_profile }}"><i class="fa fa-user fa-fw"></i> {{ text_profile }}</a></li>
            <li><a href="{{ dashboard }}"><i class="fa fa-dashboard fa-fw"></i> {{ text_dashboard }}</a></li>
            <li><a href="{{ products }}"><i class="fa fa-list fa-fw"></i> {{ text_products }}</a></li>
            <li><a href="{{ review }}"><i class="fa fa-star fa-fw"></i> {{ text_review }}</a></li>
            <li><a href="{{ managestore }}"><i class="fa fa-cog fa-fw"></i> {{ text_managestore }}</a></li>
            <li><a href="{{ manageprofile }}"><i class="fa fa-user fa-fw"></i> {{ text_manageprofile }}</a></li>
            <li><a href="{{ download }}"><i class="fa fa-cloud-download fa-fw"></i> {{ text_download }}</a></li>
            <li><a href="{{ manufacture }}"><i class="fa fa-thumb-tack fa-fw"></i> {{ text_manufacture }}</a></li>
            <li><a href="{{ logouts }}"><i class="fa fa-sign-out fa-fw"></i> {{ text_logout }}</a></li>
            
          </ul>
        </li>
{% else %}
            <li><a href="{{ sellerlogin }}"><i class="fa fa-sign-in fa-fw"></i> <span class="m-text">{{ text_loginseller }}</span></a></li>
            {% endif %}
        </ul>
        </div>
		<!--xml end-->]]></add>
		</operation>
	</file>
    
    <file path="catalog/controller/journal3/checkout.php">
		<operation error="skip">
			<search><![CDATA['cart_id'    => $product['cart_id'],]]></search>
			<add position="before" offset="1"><![CDATA[
				/* xml */
										
				if(isset($product['vendor_ids'])){
				$vendor_ids = $product['vendor_ids'];
				} else {
				$vendor_ids = '';
				}	
				
				$vendor_idss = str_replace('&amp;', '&', $this->url->link('vendor/vendor_profile', 'vendor_id='.$vendor_ids));	
				
				if(!empty($product['sellerdisplay'])){
				$sellerdisplay = $this->language->get('text_byseller'). ' <a href="'.$vendor_idss.'">'.$product['sellerdisplay'].' </a>';
				} else {
				$sellerdisplay = '';
				}				
				
				/* xml */
				]]></add>
		</operation>
		
		<operation error="skip">
			<search><![CDATA['product_id' => $product['product_id'],]]></search>
			<add position="before"><![CDATA[
				/* xml */					
				'sellerdisplay'   => $sellerdisplay,
				'vendor_ids'      => str_replace('&amp;', '&', $this->url->link('vendor/vendor_profile', 'vendor_id='.$vendor_ids)),							
				/* xml */
				]]></add>
		</operation>		
	</file>
    
    <file path="catalog/controller/journal3/checkout.php">
		<operation error="skip">
			<search><![CDATA['cart_id'    => $product['cart_id'],]]></search>
			<add position="before" offset="1"><![CDATA[
				/* xml */
										
				if(isset($product['vendor_ids'])){
				$vendor_ids = $product['vendor_ids'];
				} else {
				$vendor_ids = '';
				}	
				
				$vendor_idss = str_replace('&amp;', '&', $this->url->link('vendor/vendor_profile', 'vendor_id='.$vendor_ids));	
				
				if(!empty($product['sellerdisplay'])){
				$sellerdisplay = $this->language->get('text_byseller'). ' <a href="'.$vendor_idss.'">'.$product['sellerdisplay'].' </a>';
				} else {
				$sellerdisplay = '';
				}				
				
				/* xml */
				]]></add>
		</operation>
		
		<operation error="skip">
			<search><![CDATA['product_id' => $product['product_id'],]]></search>
			<add position="before"><![CDATA[
				/* xml */					
				'sellerdisplay'   => $sellerdisplay,
				'vendor_ids'      => str_replace('&amp;', '&', $this->url->link('vendor/vendor_profile', 'vendor_id='.$vendor_ids)),							
				/* xml */
				]]></add>
		</operation>		
	</file>
    
    <file path="catalog/view/theme/journal3/template/common/cart.twig">
		<operation error="skip">
			<search><![CDATA[<td class="text-left td-name"><a href="{{ product.href }}">{{ product.name }}</a><br /> {% if product.option %}]]></search>
			<add position="replace"><![CDATA[
				  <!-- xml -->
				   <td class="text-left td-name"><a href="{{ product.href }}">{{ product.name }}</a>				   
				{% if product.sellerdisplay %}
			 {{ text_byseller }}
				<a href="{{ product.vendor_ids }}">{{ product.sellerdisplay }}</a>
				{% endif %}
				 {% if product.option %}
				<!-- xml -->
				]]></add>
		</operation>		
	</file>
	
    <file path="catalog/view/theme/journal3/template/journal3/checkout/cart.twig">
		<operation error="skip">
			<search><![CDATA[<a :href="product.href" v-html="product.name"></a>]]></search>
			<add position="after"><![CDATA[
				<!-- xml -->
				 <span v-html="product.sellerdisplay" ></span> 
				<!-- xml -->
				]]></add>
		</operation>		
	</file>
    
    <file path="catalog/view/theme/journal2/template/checkout/cart.twig">
		<operation error="skip">
			<search><![CDATA[<td class="text-left name"><a href="{{ product.href }}">{{ product.name }}</a> {% if not product.stock %} <span class="text-danger">***</span> {% endif %}]]></search>
			<add position="replace"><![CDATA[
			<!-- xml -->
			<td class="text-left name">
				<a href="{{ product.href }}">{{ product.name }}</a> {% if not product.stock %} <span class="text-danger">***</span> {% endif %}<br/>
				{% if product.sellerdisplay %}
				 &nbsp; {{ text_byseller }}
				<a href="{{ product.vendor_ids }}">{{ product.sellerdisplay }}</a>
				{% endif %}
				<!-- xml -->
				]]></add>
		</operation>		
	</file>
	
	<file path="catalog/view/theme/journal2/template/common/cart.twig">
		<operation error="skip">
			<search><![CDATA[<td class="text-left name"><a href="{{ product.href }}">{{ product.name }}</a>]]></search>
			<add position="replace"><![CDATA[
				  <!-- xml -->
				   <td class="text-left name"><a href="{{ product.href }}">{{ product.name }}</a>
				{% if product.sellerdisplay %}
				 &nbsp; {{ text_byseller }}
				<a href="{{ product.vendor_ids }}">{{ product.sellerdisplay }}</a>
				{% endif %}
				<!-- xml -->
				]]></add>
		</operation>		
	</file>
	
	<file path="catalog/view/theme/*/template/journal2/checkout/cart.twig">
		<operation error="skip">
			<search><![CDATA[{% for option in product.option %}]]></search>
			<add position="before"><![CDATA[
				<!-- xml -->
				{% if product.sellerdisplay %}
				 &nbsp; {{ text_byseller }}
				<a href="{{ product.vendor_ids }}">{{ product.sellerdisplay }}</a>
				{% endif %}
				<!-- xml -->
				]]></add>
		</operation>		
	</file>
    
    <file path="catalog/model/journal2/checkout.php">
		<operation error="skip">
			<search><![CDATA[if ($product['image']) {]]></search>
			<add position="before"><![CDATA[
				/* xml */
				if(isset($product['sellerdisplay'])){
				$sellerdisplay = $product['sellerdisplay'];
				} else {
				$sellerdisplay = '';
				}
				
				if(isset($product['vendor_ids'])){
				$vendor_ids = $product['vendor_ids'];
				} else {
				$vendor_ids = '';
				}
				/* xml */
				]]></add>
		</operation>
		<operation error="skip">
			<search><![CDATA['cart_id'    => isset($product['cart_id']) ? $product['cart_id'] : '',]]></search>
			<add position="after"><![CDATA[
				/* xml */					
					'sellerdisplay'   => $sellerdisplay,
					'vendor_ids'      => $this->url->link('vendor/vendor_profile', 'vendor_id=' .$vendor_ids),				
					/* xml */
				]]></add>
		</operation>		
	</file>

</modification>